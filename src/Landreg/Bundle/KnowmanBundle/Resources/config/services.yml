services:
    langreg.knowman.admin.content_article:
        class: Landreg\Bundle\KnowmanBundle\Admin\ArticleAdmin
        arguments:
            - ''
            - Landreg\Bundle\KnowmanBundle\Document\Article
            - 'LandregKnowmanBundle:ArticleCRUD'
        tags:
            - { name: sonata.admin, manager_type: doctrine_phpcr, group: 'Basic CMS', label: "Article " }
        calls:
            - [setRouteBuilder, ['@sonata.admin.route.path_info_slashes']]
            - [setItemAdmin, ['@langreg.knowman.admin.content_item']]

    langreg.knowman.admin.content_item:
        class: Landreg\Bundle\KnowmanBundle\Admin\ItemAdmin
        arguments:
            - ''
            - Landreg\Bundle\KnowmanBundle\Document\Item
            - 'LandregKnowmanBundle:CRUD'
        tags:
            - { name: sonata.admin, manager_type: doctrine_phpcr, group: 'Basic CMS', label: "Item " }
        calls:
            - [setRouteBuilder, ['@sonata.admin.route.path_info_slashes']]

    langreg.knowman.phpcr.initializer:
        class: Doctrine\Bundle\PHPCRBundle\Initializer\GenericInitializer
        arguments:
            - "Landreg Knowman Basepaths"
            - [ "/knowman/article", "/knowman/item", "/knowman/snippet" ]
            - ~
        tags:
            - { name: "doctrine_phpcr.initializer" }

    landreg.knowman.admin.controller.admin:
        class:  Landreg\Bundle\KnowmanBundle\Controller\HelperController
        arguments:
            - @twig
            - @sonata.admin.pool
            - @sonata.admin.helper
            - @validator

